(()=>{"use strict";const e={API_KEY:{key:"api_key",defaultValue:""},APP_ID:{key:"appId",defaultValue:""},POWER_ON:{key:"power_on",defaultValue:!0},TIKTOK:{key:"tiktok",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},FUNCAPTCHA:{key:"funcaptcha",defaultValue:{delayClick:100,loop:!0,isActive:!0,maxImageCaptcha:25}},ZALO:{key:"zalo",defaultValue:{delayClick:100,loop:!0,isActive:!0}},SHOPEE:{key:"shopee",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},RECAPTCHAV2:{key:"reCaptchav2",defaultValue:{delayClick:500,loop:!0,isActive:!0,useToken:!1}},AMZN:{key:"amzn",defaultValue:{delayClick:100,loop:!0,isActive:!0}},GEETEST:{key:"geetest",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},SLIDE_ALL:{key:"slide_all",defaultValue:{delaySwipe:15,loop:!0,isActive:!0}},HCAPTCHA:{key:"hcaptcha",defaultValue:{delayClick:500,delaySwipe:15,loop:!0,isActive:!0}},CLOUDFLARE:{key:"cloudflare",defaultValue:{delayClick:2e3,isActive:!0}}};async function t(e,t,a){const n="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{return await new Promise(((i,r)=>{n.sendMessage({source:e,type:t,data:a},(e=>{n.lastError?r(new Error(`Error sending message: ${n.lastError.message}`)):i(e)}))}))}catch(e){throw e}}const a=async(e,t)=>{const a="undefined"!=typeof browser?browser.storage.local:chrome.storage.local,n="undefined"!=typeof browser?browser.runtime:chrome.runtime;try{const i=await a.get([e]);if(n.lastError)throw new Error(`Error retrieving ${e}: ${n.lastError.message}`);return null!=i[e]?i[e]:t}catch(e){throw e}};Promise.resolve();async function n(e){return new Promise((t=>setTimeout(t,e)))}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=document.getElementById("captcha-message");n||(n=document.createElement("div"),n.id="captcha-message",n.style.zIndex="99999999",n.style.padding="3px 3px",n.style.borderRadius="3px",n.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.2)",n.style.fontSize="10px",n.style.fontWeight="600",n.style.fontFamily="Arial, sans-serif",n.style.textAlign="center",n.style.whiteSpace="nowrap",n.style.color="white",n.style.top="1px",a&&a.parentElement?(n.style.position="absolute",n.style.left="2px",a.parentElement.appendChild(n)):(n.style.position="fixed",n.style.left="1px",document.body.appendChild(n)));const i={success:"linear-gradient(90deg, #6a11cb,rgb(191, 37, 252))",error:"linear-gradient(90deg, #ff416c, #ff4b2b)",warning:"linear-gradient(90deg, #ff9a44, #fc6076)",info:"linear-gradient(90deg, #17a2b8, #138496)"};n.innerText="[OMOcaptcha.com] "+e,n.style.background=i[t]||i.success,n.style.display="block"}async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{timeout:5e3,maxRetries:3,typeImage:"png"};try{const{timeout:a,maxRetries:i,typeImage:r}=t,c=`image/${r||"png"}`,o={arkoselabs:"image/jpeg"};function s(e){for(const[t,a]of Object.entries(o))if(e.includes(t))return a;return c}if(e instanceof HTMLCanvasElement||e.tagName&&"CANVAS"===e.tagName.toUpperCase())try{if(0===e.width||0===e.height)return"";const l=e.getBoundingClientRect(),u=l.width,d=l.height,m=document.createElement("canvas");m.width=u,m.height=d;m.getContext("2d").drawImage(e,0,0,u,d);const p=m.toDataURL(c).split(",")[1];return p||""}catch(f){return""}if(e instanceof Element)try{const w=e.src;if(w&&w.startsWith("data:image/")){const y=w.split(",")[1];return y||""}e=w||""}catch(h){return""}if("string"==typeof e&&e.startsWith("blob:"))try{return await new Promise((t=>{const a=new Image;a.setAttribute("crossOrigin","anonymous");const n=setTimeout((()=>{t("")}),1e3);a.onload=function(){clearTimeout(n);try{const a=document.createElement("canvas");a.width=this.naturalWidth,a.height=this.naturalHeight;a.getContext("2d").drawImage(this,0,0);const n=s(e);a.toBlob((e=>{if(!e)return void t("");const a=new FileReader;a.onloadend=()=>{const e=a.result.split(",")[1];t(e)},a.onerror=()=>t(""),a.readAsDataURL(e)}),n)}catch(e){t("")}},a.onerror=()=>{clearTimeout(n),t("")},a.src=e}))}catch(g){return""}if("string"==typeof e)try{for(let b=0;b<i;b++)try{const v=new AbortController,k=setTimeout((()=>v.abort()),a),E=await fetch(e,{signal:v.signal});if(clearTimeout(k),!E.ok)throw new Error(`HTTP error ${E.status}`);const S=await E.blob();return await new Promise(((e,t)=>{const a=new FileReader;a.onloadend=()=>e(a.result.split(",")[1]),a.onerror=()=>t(new Error("Failed to read blob as base64")),a.readAsDataURL(S)}))}catch(_){if(b===i-1)return"";await n(500)}}catch(I){return""}return""}catch(C){return""}}function c(e,t){return new Promise((a=>{const n=Date.now(),i=setInterval((()=>{for(const t of e){if(document.querySelector(t))return clearInterval(i),void a(!0)}Date.now()-n>=t&&(clearInterval(i),a(!1))}),500)}))}async function o(e){try{const a=await t("SOURCE","createTask",e);return a||""}catch(e){return""}}let s,l,u,d,m;async function p(){s=await a(e.POWER_ON.key,e.POWER_ON.defaultValue),l=await a(e.API_KEY.key,e.API_KEY.defaultValue);const t=await a(e.SLIDE_ALL.key,e.SLIDE_ALL.defaultValue);u=t.delaySwipe,d=t.loop,m=t.isActive}let f=!1,w="";async function y(){for(;;){let e,t;await n(500);for(let a=0;a<10&&(e=document.querySelector('[class*="mask"][style=""] [class*="verify-img-panel"] img'),t=document.querySelector('[class*="mask"][style=""] [class*="verify-sub-block"] img'),null===e||null===t);a++)await n(1e3);if(!e||!t)return;const a={type:"SliderAllWebTask",domain:"www.coresky.com",imageBase64s:[e.src.split(",")[1],t.src.split(",")[1]]},i=JSON.stringify({clientKey:l,task:a}),r=await o(i);if(!r||r.error){if(d){document.querySelector(".verify-refresh").click();continue}return}const c=await C(l,r.taskId,30);if(!c||c.errorDescription){if(d){document.querySelector(".verify-refresh").click();continue}return}let s=parseInt(c.end,10),u=document.querySelector(".verify-move-block");if(!u)continue;const m=u.getBoundingClientRect(),p=m.left+m.width/2,f=m.top+m.height/2,w=p+s;u.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,clientX:p,clientY:f}));const y=20;for(let e=1;e<=y;e++){const t=p+s*e/y;u.dispatchEvent(new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,clientX:t,clientY:f})),await n(20)}if(u.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,clientX:w,clientY:f})),!d)return;await n(5e3),document.querySelector(".verify-refresh").click()}}async function h(){for(;;){await n(700);var e=null;for(let t=0;t<10&&null==(e=document.querySelector('[id="captcha__element"] [id="captcha__puzzle"]>canvas'));t++)await n(1e3);if(!e)return;let t="";for(let e=0;e<10;e++){if(t=S(),t&&w!==t){w=t;break}await n(1e3)}if(!t)return;const a={type:"SliderAllWebTask",imageBase64:t,widthView:e.width,heightView:e.height},i=JSON.stringify({clientKey:l,task:a}),r=await o(i);if(!r||r.error){if(d){document.querySelector('button[id="captcha__reload__button"]').click();continue}return}const c=await C(l,r.taskId,30);if(!c||c.errorDescription){if(d){document.querySelector('button[id="captcha__reload__button"]').click();continue}return}let s=parseInt(c.rects[0].x,10)+12,u=document.querySelector('[id="captcha__frame__bottom"] [class*="sliderContainer"] div[class="slider"]');await I(u,s),await n(3500);if(document.querySelector('[id="captcha__element"] [id="captcha__puzzle"]>canvas')){if(d)continue;return}return}}async function g(){for(;;){let e,t;await n(500);for(let a=0;a<10&&(e=document.querySelector('[class*="kwai-captcha-page"] [class*="image-container"] img[class="bg-img"]'),t=document.querySelector('[class*="kwai-captcha-page"] [class*="image-container"] img[class="slider-img"]'),null===e||null===t);a++)await n(1e3);if(!e||!t)return;i("Captcha captchaKeoThaKwai","red",e);const a={type:"SliderAllWebTask",imageBase64:await r(e.src),widthView:e.width,heightView:e.height},c=JSON.stringify({clientKey:l,task:a});i("Create task...","red",e);const s=await o(c);if(!s||s.error){s&&s.errorDescription;if(d){document.querySelector(".icon.icon-refresh").click();continue}return}i("Get result...","red",e);const u=await C(l,s.taskId,30);if(!u||u.errorDescription){if(d){document.querySelector(".icon.icon-refresh").click();continue}return}let m=parseInt(u.rects[0].x,10)-t.offsetLeft,p=document.querySelector(".slider .slider-shadow > div");i("Dragging...","red",e),await I(p,m),await n(3500);if(document.querySelector('[class*="kwai-captcha-page"] [class*="image-container"] img[class="bg-img"]')){if(i("Solve failed","red",e),d)continue;return}return}}async function b(){for(;;){let e,a;await n(500);for(let t=0;t<10&&(e=document.querySelector('[class*="bs-popup"] [class*="bs-main-image"]'),a=document.querySelector(".bs-slide-image"),null===e);t++)await n(1e3);if(!e)return;const i=getComputedStyle(e),r=i.backgroundImage.match(/url\(["']?(.*?)["']?\)/)?.[1];let c="";for(let e=0;e<10;e++){if(c=await t("SLIDE_ALL","createImageBase64",{url:r}),c&&w!==c){w=c;break}await n(1e3)}const s={type:"SliderAllWebTask",imageBase64:c,widthView:e.clientWidth+a.clientWidth,heightView:e.clientHeight},u=JSON.stringify({clientKey:l,task:s}),m=await o(u);if(!m||m.error){if(d){document.querySelector(".bs-refresh-icon").click();continue}return}const p=await C(l,m.taskId,30);if(!p||p.errorDescription){if(d){document.querySelector(".bs-refresh-icon").click();continue}return}let f=parseInt(p.rects[1].x,10)-a.clientWidth,y=document.querySelector(".bs-slide-thumb");await I(y,f),await n(3500);if(document.querySelector('[class*="bs-popup"] [class*="bs-main-image"]')){if(d)continue;return}return}}async function v(){for(;;){let e;await n(500);for(let t=0;t<10&&(e=document.querySelector('img[class*="gocaptcha-module_picture"]'),null===e);t++)await n(1e3);if(!e)return;let t="";for(let a=0;a<10;a++){if(t=e.src,t&&w!==t){w=t;break}await n(1e3)}const a={type:"SliderAllWebTask",imageBase64:t,widthView:e.clientWidth,heightView:e.clientHeight};let i=document.querySelector('[class*="gocaptcha-module_dragBlock"]');const r=JSON.stringify({clientKey:l,task:a}),c=await o(r);if(!c||c.error){if(d){location.reload();continue}return}const s=await C(l,c.taskId,30);if(!s||s.errorDescription){if(d){location.reload();continue}return}let u=parseInt(s.rects[0].x,10),m=1;m=103===u?91:112===u?99:205===u?182:215===u?195:u-15,await _(i,m),await n(3e3);if(!document.querySelector('img[class*="gocaptcha-module_picture"]'))return;location.reload()}}async function k(){for(;;){let e;await n(500);for(let t=0;t<10&&(e=document.querySelector('#aliyunCaptcha-window-popup[style*="display: block;"] #aliyunCaptcha-img'),null===e);t++)await n(1e3);if(!e)return;let t="";for(let a=0;a<10;a++){if(a>0&&await n(1e3),t=await r(e.src),t&&w!==t){w=t;break}await n(1e3)}const a={type:"SliderAllWebTask",imageBase64:t,widthView:e.clientWidth,heightView:e.clientHeight};let i=document.querySelector("#aliyunCaptcha-sliding-slider");const c=JSON.stringify({clientKey:l,task:a}),s=await o(c);if(!s||s.error){if(d){document.querySelector("#aliyunCaptcha-btn-refresh").click();continue}return}const u=await C(l,s.taskId,30);if(!u||u.errorDescription){if(d){document.querySelector("#aliyunCaptcha-btn-refresh").click();continue}return}let m=1;m=parseInt(u.rects[0].x,10)+25,await _(i,m)}}function E(e){return!!document.querySelector(e)}function S(){const e=document.querySelectorAll("#captcha__puzzle canvas"),t=e[0],a=e[1],n=document.createElement("canvas");n.width=280,n.height=155;const i=n.getContext("2d");i.drawImage(t,0,0),i.drawImage(a,0,0);return n.toDataURL("image/jpeg").replace(/^data:image\/jpeg;base64,/,"")}async function _(e,t){return new Promise((a=>{if(!e)return a();e.parentElement;const i=t,r=new DataTransfer,c=u;function o(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.dispatchEvent(new MouseEvent(t,{bubbles:!0,cancelable:!0,...a})),e.dispatchEvent(new PointerEvent(t,{bubbles:!0,cancelable:!0,...a,pointerType:"mouse",isPrimary:!0}))}(async()=>{o("mouseenter"),o("mouseover"),await n(c),o("pointerdown",{clientX:0,clientY:0}),o("mousedown",{clientX:0,clientY:0}),e.dispatchEvent(new DragEvent("dragstart",{bubbles:!0,cancelable:!0,dataTransfer:r}));let s=0,l=0;for(;s+10<t;){const e=s/t;let a;a=e<.3?2*Math.random()+1:e<.7?6*Math.random()+2:2*Math.random()+.5,s+=a,l+=8*(Math.random()-.5);const r=Math.min(s,i),u=l;o("mousemove",{clientX:r,clientY:u}),o("pointermove",{clientX:r,clientY:u}),await n(c)}s=t;const u=l;o("mousemove",{clientX:s,clientY:u}),o("pointermove",{clientX:s,clientY:u}),await n(c),o("pointerup",{clientX:s,clientY:u}),o("mouseup",{clientX:s,clientY:u}),e.dispatchEvent(new DragEvent("dragend",{bubbles:!0,cancelable:!0,dataTransfer:r})),a()})()}))}async function I(e,t){const a=e.getBoundingClientRect(),n=a.left+a.width/2,i=a.top+a.height/2,r=n+t,c={bubbles:!0,cancelable:!0,clientX:n,clientY:i,pointerType:"mouse",buttons:0};for(const t of[e,document,window])t.dispatchEvent(new PointerEvent("pointerover",c)),t.dispatchEvent(new PointerEvent("pointerenter",c)),t.dispatchEvent(new MouseEvent("mouseover",c)),t.dispatchEvent(new MouseEvent("mouseenter",c));await new Promise((e=>setTimeout(e,300)));const o={...c,buttons:1};for(const t of[e,document,window])t.dispatchEvent(new PointerEvent("pointerdown",o)),t.dispatchEvent(new MouseEvent("mousedown",o));const s=12+Math.floor(6*Math.random());for(let a=0;a<=s;a++){const r={bubbles:!0,cancelable:!0,clientX:n+t*(a/s)+2*(Math.random()-.5),clientY:i+3*(Math.random()-.5),pointerType:"mouse",buttons:1};for(const t of[e,document,window])t.dispatchEvent(new PointerEvent("pointermove",r)),t.dispatchEvent(new MouseEvent("mousemove",r));await new Promise((e=>setTimeout(e,35+25*Math.random())))}const l={bubbles:!0,cancelable:!0,clientX:r,clientY:i,pointerType:"mouse",buttons:0};for(const t of[e,document,window])t.dispatchEvent(new PointerEvent("pointerup",l)),t.dispatchEvent(new MouseEvent("mouseup",l))}async function C(e,a,n){const i=JSON.stringify({clientKey:e,taskId:a});try{const e=await t("SOURCE","getTaskResult",{data:i,timeWait:n});return e?"fail"===e.status?{errorDescription:e.errorDescription}:e.solution?e.solution:e.type?e:null:null}catch(e){return null}}(async()=>{await p();new MutationObserver((async(e,t)=>{await async function(e){if(await p(),s&&m&&l&&"YOUR_CLIEN_KEY"!==l)for(const t of e)if("childList"===t.type){const e=document.querySelector('[class*="kwai-captcha-page"] [class*="image-container"]'),t=document.querySelector('[class*="bs-popup"] [class*="bs-main-image"]');if(!e&&!t||f)continue;if(!l)return;f=!0;try{if(await n(1500),!await c(['[class*="kwai-captcha-page"] [class*="image-container"] img','[class*="bs-popup"] [class*="bs-main-image"]'],1e4))return;for(let e=0;e<20;e++){if(E('[class*="kwai-captcha-page"] [class*="image-container"] img[class="bg-img"]')){await g();break}if(E('[class*="bs-popup"] [class*="bs-main-image"]')){await b();break}await n(1e3)}}finally{f=!1}}}(e)})).observe(document.body,{childList:!0,subtree:!0});const e={"www.coresky.com":{captchaImageSelector:'[class*="mask"][style=""] [class*="verify-img-panel"] img',function:y},"dapp.pixelheroes.io":{captchaImageSelector:'img[class*="gocaptcha-module_picture"]',function:v},"edge.titannet.info":{captchaImageSelector:'#aliyunCaptcha-window-popup[style*="display: block;"] #aliyunCaptcha-img',function:k},"geo.captcha-delivery.com":{captchaImageSelector:'[id="captcha__element"] [id="captcha__puzzle"] canvas[class="block"]',function:h}}[window.location.hostname];if(e){let t=!1;async function a(a){if(s&&m&&l&&"YOUR_CLIEN_KEY"!==l&&!t){t=!0;try{await e.function()}catch(e){}finally{t=!1}}}(async()=>{for(let t=0;t<100;t++){const t=document.querySelector(e.captchaImageSelector);if(t){await a();break}await n(1500)}})();new MutationObserver((()=>{const t=document.querySelector(e.captchaImageSelector);t&&a()})).observe(document.body,{childList:!0,subtree:!0})}else;})()})();