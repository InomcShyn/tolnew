(function(){"use strict";const s="XV_prefs",r="XV_locationSpoofingData",l=Math.random().toString(36).substring(2)+crypto.getRandomValues(new Uint32Array(3)).join("");let o=!0,d=!1,c;function u(){return document instanceof HTMLDocument||document instanceof XMLDocument}function f(){var e;if(typeof chrome>"u")return;const t={coords:(e=c.selectedLocation)==null?void 0:e.coords,fakeIt:c.state&&["connected","connecting","disconnecting","reconnecting","connection_error"].includes(c.state)&&o};new CustomEvent(l,{bubbles:!0,composed:!0,detail:JSON.stringify(t)})}function a(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","script");t.src=chrome.runtime.getURL("/src/scripts/content/location-spoofing.js");const e=document.head||document.body||document.documentElement,n=e.childNodes&&e.childNodes.length>0?e.childNodes[0]:null;n?e.insertBefore(t,n):e.appendChild(t),d=!0}chrome.storage.local.get([r,s],t=>{var e,n,i;o=((n=(e=t[s])==null?void 0:e.value)==null?void 0:n.hideLocation)??!1,c=(i=t[r])==null?void 0:i.value,u()&&o&&a()}),chrome.storage.onChanged.addListener(t=>{var e,n,i;s in t&&(o=((n=(e=t[s].newValue)==null?void 0:e.value)==null?void 0:n.hideLocation)??!1),r in t&&(c=(i=t[r].newValue)==null?void 0:i.value),o&&!d&&a(),d&&f()})})();
