import{r as o,u as d,C as u,j as e,g as f,t as a,i as N,D as y,n as L,R as C}from"../../assets/clsx-CiUfbvzc.js";import{u as S,c as I,H as _,h as E,g as v,r as R,a as H}from"../../assets/Hint-cIKY7vey.js";const T="_networkLock_1o8xu_1",U="_logo_1o8xu_10",D="_content_1o8xu_13",O="_statusHeader_1o8xu_21",P="_status_1o8xu_21",V="_buttonContainer_1o8xu_34",s={networkLock:T,logo:U,content:D,statusHeader:O,status:P,buttonContainer:V},$={connected:"link",connecting:"reconnect",reconnecting:"reconnect",connection_error:"error"},g=({children:c})=>e.jsx("div",{className:s.networkLock,children:e.jsxs("div",{className:s.content,children:[e.jsx("img",{className:s.logo,src:N("/images/logo/logo.svg"),height:"48",width:"38",alt:"ExpressVPN Logo"}),e.jsx("div",{children:c})]})});function A(){const[c,m]=o.useState(!1),[r,x]=o.useState("#"),{currentState:t=y,selectedLocation:i}=d(S(n=>({currentState:n.currentInfo.state,selectedLocation:n.currentInfo.selectedLocation})));o.useEffect(()=>{async function n(){u.getInstance().bind(d),await E()}return n(),()=>u.getInstance().unbind()},[]),o.useEffect(()=>{const n=window.location.hash.slice(1).split(","),p=n[0],l=n[1],j=/^https?:\/\//i.test(l)?l:"#";x(j),new I().read("nonce").then(b=>{m(p===b)})},[]),o.useEffect(()=>{["connected","ready"].includes(t)&&c&&setTimeout(()=>{window.location.replace(r)},500)},[t,c,r]);const h=()=>{v()},k=()=>{R()},w=()=>{H(),setTimeout(()=>{window.location.replace(r)},500)};return!c&&!["connecting","reconnecting","connection_error"].includes(t)?e.jsxs(g,{children:[e.jsxs("p",{"data-testid":"unexpected-redirect",children:[e.jsx("b",{children:"Warning:"})," an unexpected redirect was detected. Only continue if you recognise the link below"]}),e.jsxs("p",{children:["Please",e.jsxs("a",{target:"_blank",href:`${f("support")}?utm_source=browser_extension&utm_medium=apps&utm_campaign=browser_extension_links&utm_content=network-lock-nonce`,rel:"noreferrer",children:[" ","contact Support"]})," ","if this issue persists."]}),e.jsx("a",{href:r,"data-testid":"destination-url",children:r})]}):e.jsx(g,{children:["connecting","reconnecting","connection_error","connected"].includes(t)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:s.statusHeader,"data-testid":"status-header",children:a(`networkLock_header_${t}_text`)}),e.jsx("div",{className:s.status,children:a(`networkLock_status_${t}_text`).replace("%LOCATION%",(i==null?void 0:i.locationName)||"")}),e.jsx(_,{type:t==="connected"?"green":"information",iconName:$[t],stringKey:`networkLock_hint_${t}_text`,style:{alignItems:"start",marginBottom:t==="connected"?0:"20px"}}),t!=="connected"&&e.jsxs("div",{className:s.buttonContainer,children:[t==="connection_error"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"primary",onClick:k,children:a("networkLock_try_again_button_label")}),e.jsx("button",{className:"secondary",onClick:w,children:a("networkLock_unblock_internet_button_label")})]}),["connecting","reconnecting"].includes(t)&&e.jsx("button",{className:"secondary",onClick:h,children:a("networkLock_cancel_button_label")})]})]}):e.jsx(_,{stringKey:"networkLock_hint_connected_text",iconName:"link",type:"green"})})}L();C.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(A,{})}));
